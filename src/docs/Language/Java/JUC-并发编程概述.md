---
title: JUC-并发编程概述
article: false
category:
  - Java
  - JUC
---
## 并发编程概述
### 什么是JUC
- JUC 就是java.util.concurrent(并发编程)工具包的简称。这是一个处理线程的工具包，JDK 1.5开始出现的。
### 进程与线程
#### 进程（Process）
- 进程是系统进行资源分配和调度的基本单位，是操作系统结构的基础
- 进程是线程的容器
- 程序是指令、数据及其组织形式的描述，进程是程序的实体
#### 线程(Thread)
- 线程是程序执行的基本单元
- 线程的状态：
  - NEW（新建）
  - RUNNABLE(准备就绪)
  - BLOCKED(阻塞)
  - WAITING(不见不散)
  - TIMED_WAITING（过时不候）
  - TERMINATED（终结）
### wait和sleep的区别
- sleep是Thread的静态方法。wait是Object的方法，任何对象实例都 能调用。
- sleep不会释放锁，它也不需要占用锁。wait会释放锁，但调用它的前提 是当前线程占有锁（即代码要在synchronized中）。
- 它们都可以被interrupted方法中断。
### 并发与并行
#### 串行模式
- 串行表示所有任务都一一按先后顺序进行
#### 并行模式
- 并行意味着可以同时取得多个任务，并同时去执行所取得的这些任务
- 并行的效率从代码层次上强依赖于多进程/多线程代码，从硬件角度上 则依赖于多核CPU。
#### 并发(concurrent)
- 并发描述的是多进程同时运行的现象
- 要解决大并发问题，通常是将大任务分解成多个小任务, 由于操作系统对进程的调度是随机的，所以切分成多个小任务后，可能会从任一小任务处执行。这可能会出现一些现象：
  - 可能出现一个小任务执行了多次，还没开始下个任务的情况。这时一般会采用队列或类似的数据结构来存放各个小任务的成果
  - 可能出现还没准备好第一步就执行第二步的可能。这时，一般采用多路复用或异步的方式，比如只有准备好产生了事件通知才执行某个任务。
  - 可以多进程/多线程的方式并行执行这些小任务。也可以单进程/单线程执行这些小任务，这时很可能要配合多路复用才能达到较高的效率
#### 管程(monitor)
- 管程是保证了同一时刻只有一个进程在管程内活动,即管程内定义的操作在同一时刻只被一个进程调用(由编译器实现),但是这样并不能保证进程以设计的顺序执行
  - 可以理解为操作系统中的监视器、java中的锁，指的是一种同步机制
- JVM中同步是基于进入和退出管程对象实现的，每个对象都会有一个管程对象，管程会随着java对象一同创建和销毁。管程对象就是对临界区进行加锁，进入的时候进行加锁，退出的时候解锁
- 执行线程首先要持有管程对象，然后才能执行方法，当方法完成之后会释放管程，方法在执行时候会持有管程，其他线程无法再获取同一个管程
#### 用户线程和守护线程
- 用户线程:平时用到的普通线程,自定义线程 
- 守护线程:运行在后台,是一种特殊的线程,比如垃圾回收,当主线程结束后,用户线程还在运行,JVM存活 
- 如果没有用户线程,都是守护线程,JVM结束