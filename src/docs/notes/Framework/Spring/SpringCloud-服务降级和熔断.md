---
title: SpringCloud-服务降级和熔断
article: false
category:
  - Java
  - SpringCloud
---
## 服务降级和熔断
1. 分布式系统要解决的问题：**高内聚、低耦合**
   - 低耦合：已经通过微服务架构将一个个服务细分开实现
   - 高内聚：没有实现
     - 多个服务调用，链路变长1调2,2调3,3调4，若2出现问题(网络卡顿、网络超时、程序出错等问题)，则整个链路都会出现问题 ，破坏了服务的高可用。此时需要**服务降级**解决
### 服务降级(fallback)
- 哪些情况会触发降级
  - 程序运行异常
  - 超时
  - 服务熔断触发服务降级
  - 线程池/信号量打满也会导致服务降级
- 服务器忙，请稍后再试，不让客户端等待并立刻返回一个友好提示，fallback
  - 例如if()..else if()...else{ 友好提示 }	
### 服务熔断(break)
- 类比保险丝，达到最大服务访问后，直接拒绝访问，拉闸限电，然后调用服务降级的方法并返回友好提示
- 服务的降级->进而熔断->**恢复调用链路**
  - 熔断机制概述
  - [参考文章](https://martinfowler.com/bliki/CircuitBreaker.html)
    - closed:正常状态
    - open:跳闸了
    - 半开状态:恢复一部分，允许少量请求调用，是一个慢慢恢复一部分的过程

## 高并发压测测试
- Jmeter

