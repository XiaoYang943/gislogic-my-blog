---
title: Java-数据结构-数组
article: false
category:
  - Java
  - Java数据结构
---
## 数组
- 定义：用连续的内存空间存储相同数据类型的线性数据结构
## 内存情况
### 堆内存中
- 在堆内存中开辟一块连续的内存
- 数组本质是对象
  - 对象头部分 
    - markdord：8字节
    - 类指针：4字节
    - 数组大小：4字节
  - 数据部分
    - 数组元素：每个元素占用的字节数取决于元素的数据类型
    - 对齐字节
### 栈内存中  
- 在栈内存中存储数组变量，指向堆内存中该数组的首地址
## 索引
### 如何获取值
- 因为元素是存储在连续的内存中，所以可以使用索引获取值
### 如何通过索引找到堆内存的数据
- 通过寻址公式计算当前某一个下标的内存地址
  - `a[i] = baseAddress + i * dataTypeSize`
    - i：索引
    - baseAddress：数组首地址
    - dataTypeSize: 数组中元素类型的大小(字节)
### 为什么数组从索引0开始
- 若数组索从1开始：
  - 寻址公式改变为：`a[i] = baseAddress + （i - 1） * dataTypeSize`
  - 相对于索引从0开始的公式，对于cpu来说，多了一个(i - 1)的过程，对于大量的运算，降低了效率
## 分类
### 静态数组
- 静态数组在初始化时大小已经确定
  - 只能查询，不能插入和删除
### 动态数组
- 动态数组的大小能够发生变化
  - 可以查询、插入和删除
- 实现类：`ArrayList`
## 访问性能
- 随机查询 (通过下标) 的时间复杂度是O(1)
- 查找元素（未知下标）的时间复杂度是O(n)
- 查找元素（未知下标但排序）通过二分查找的时间复杂度是O(logn)
- 插入和删除的时候，为了保证数组的内存连续性，需要挪动数组元素，平均时间复杂度为O(n)
